<script setup lang="ts">
import { computed } from "vue";
import { useTimelineStore } from "../../timelineStore";
import { useNodeStore } from "../../useNodeStore";
import { useCreateEvent } from "./composables/useCreateEvent";
const { newEventPosition, mouseDownTouchStartListener, creating } =
  useCreateEvent();
const timelineStore = useTimelineStore();
const nodeStore = useNodeStore();

const isGantt = computed(() => timelineStore.mode === "gantt");
</script>

<template>
  <div class="w-full relative mt-2">
    <button
      v-if="newEventPosition"
      title="Click and drag to create new event"
      class="h-3 rounded-full border flex items-center justify-center flex-shrink-0 relative border-transparent hover:border-slate-700 hover:bg-slate-700 hover:shadow hover:text-white opacity-60 dark:hover:border-gray-600 dark:hover:bg-gray-600 text-slate-600 dark:text-slate-100 transition font-bold"
      :class="
        creating
          ? 'dark:border-gray-600 dark:bg-gray-600 bg-slate-700 border-slate-700 opacity-60 shadow text-white'
          : 'bg-transparent'
      "
      :style="`left: ${newEventPosition[0].left}px; width: ${
        newEventPosition[1].left - newEventPosition[0].left
      }px;`"
      @mousedown.prevent.stop="mouseDownTouchStartListener"
      @touchstart.prevent.stop="mouseDownTouchStartListener"
    >
      +
    </button>
  </div>
</template>

<style scoped></style>
